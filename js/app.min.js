"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}document.addEventListener("DOMContentLoaded",(function(){function e(e){var t=0,i=window.innerWidth-document.body.offsetWidth+"px",r=document.querySelectorAll(".fixed");e?(document.body.classList.add("scroll-disabled"),t=window.pageYOffset,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="-"+t+"px",document.body.style.width="100%",document.body.style.paddingRight=i,r&&r.forEach((function(e){e.style.marginRight=i}))):(document.body.classList.remove("scroll-disabled"),t=Math.abs(parseInt(document.querySelector("body").style.top.replace("px",""))),document.body.style.removeProperty("overflow"),document.body.style.removeProperty("position"),document.body.style.removeProperty("top"),document.body.style.removeProperty("width"),document.body.style.removeProperty("padding-right"),r&&r.forEach((function(e){e.style.removeProperty("margin-right")})),window.scrollTo({top:isNaN(t)?0:t,behavior:"instant"}))}function t(e,t){var i=e.querySelector(".validation-form-message");i&&(i.dataset.originalMessage||(i.dataset.originalMessage=i.textContent.trim()),t?i.textContent=t:(i.textContent=i.dataset.originalMessage,delete i.dataset.originalMessage))}var i=function(e,t){var i=function(i){for(var s=i.target;s&&!e.includes(s);)s=s.parentNode;s||(t(),r())};function r(){document.documentElement.removeEventListener("click",i)}return{setBodyChecker:function(){document.documentElement.addEventListener("click",i)},removeBodyChecker:r}},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="none"),window.setTimeout((function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="auto")}),t),e.parentNode.classList.remove("is--open")},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;e.style.removeProperty("display");var i=window.getComputedStyle(e).display;"none"===i&&(i="block"),e.style.display=i;var r=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=r+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="none"),window.setTimeout((function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="auto")}),t),e.parentNode.classList.add("is--open")};Inputmask().mask(document.querySelectorAll("input"));var n=document.querySelectorAll(".input-field__input"),o=document.querySelectorAll(".input-field__clear"),a=document.querySelectorAll(".input-field__visibility");n&&n.forEach((function(e){e.addEventListener("input",(function(){var t=e.closest(".input-field").querySelector(".input-field__clear");t&&(e.value.length>=1?t.classList.add("is--active"):t.classList.remove("is--active"))}))})),o&&o.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var i=e.closest(".input-field").querySelector(".input-field__input");i.value.length>=1&&(i.value="",e.classList.remove("is--active"))}))})),a&&a.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var i=e.closest(".input-field").querySelector(".input-field__input");e.classList.contains("is--active")?(e.classList.remove("is--active"),i.type="password"):(e.classList.add("is--active"),i.type="text")}))}));var l=document.querySelectorAll('.js-input-visibility input[type="checkbox"]');l&&l.forEach((function(e){e.addEventListener("change",(function(t){t.preventDefault();var i=e.closest(".auth-form__switches").querySelector(".auth-form__hidden-block");if(1==e.checked)s(i),"checked"==i.dataset.checkbox&&i.querySelectorAll(".square-checkbox__input").forEach((function(e){e.checked=!0}));else if(0==e.checked){r(i),i.querySelectorAll(".square-checkbox__input").forEach((function(e){e.checked=!1}))}}))}));var c=document.querySelectorAll(".input-field__number");c&&c.forEach((function(e,t){e.addEventListener("input",(function(e){var i=e.target.value;i.length>1&&(e.target.value=i.slice(0,1)),1===i.length&&t<c.length-1&&c[t+1].focus()})),e.addEventListener("keydown",(function(i){"Backspace"===i.key&&!e.value&&t>0&&c[t-1].focus()})),e.addEventListener("paste",(function(e){e.preventDefault();var t=e.clipboardData.getData("text").split("").filter((function(e){return/\d/.test(e)}));t.slice(0,c.length).forEach((function(e,t){c[t].value=e})),t.length>0&&c[Math.min(t.length,c.length-1)].focus()}))}));var d=document.querySelectorAll(".select-box__placeholder"),u=document.querySelectorAll(".select-box__checkbox");d&&(d.forEach((function(e){var t=function(){document.querySelectorAll(".select-box").forEach((function(e){return e.classList.remove("is--active")}))},r=i([e.parentNode].concat(_toConsumableArray(document.querySelectorAll(".select-box"))),t);e.addEventListener("click",(function(){var i=e.closest(".select-box");i.classList.contains("is--active")?t():(t(),i.classList.add("is--active"),r.setBodyChecker())}))})),u&&u.forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".select-box");t.querySelector(".select-box__placeholder span").innerHTML=e.querySelector(".select-box__title").innerHTML,document.querySelectorAll(".select-box").forEach((function(e){return e.classList.remove("is--active")})),t.querySelector(".select-box__placeholder").classList.contains("is--selected")||t.querySelector(".select-box__placeholder").classList.add("is--selected")}))})));var v,f=document.querySelector(".c-code__resend-btn");f&&function(e,t){clearInterval(v);var i=t,r=e.closest(".c-code"),s=r.querySelector(".c-code__timer");r.classList.add("is--countdown"),s.textContent=i,v=setInterval((function(){var e=i;s.textContent=e,--i<0&&(clearInterval(v),r.classList.remove("is--countdown"))}),1e3)}(f,90);var p=document.querySelectorAll(".c-dropdown__trigger");p&&p.forEach((function(e){var t=function(){document.querySelectorAll(".c-dropdown").forEach((function(e){return e.classList.remove("is--active")}))},r=i([e.parentNode],t);e.addEventListener("click",(function(i){i.preventDefault();var s=e.closest(".c-dropdown");e.classList.contains("c-dropdown__trigger--mobile")?window.innerWidth>=744&&(s.classList.contains("is--active")?t():(s.classList.add("is--active"),r.setBodyChecker())):s.classList.contains("is--active")?t():(s.classList.add("is--active"),r.setBodyChecker())}))}));var m=document.querySelectorAll(".c-user__trigger");m&&m.forEach((function(e){var t=function(){document.querySelectorAll(".c-user").forEach((function(e){return e.classList.remove("is--active")}))},r=i([e.parentNode],t);e.addEventListener("click",(function(i){i.preventDefault();var s=e.closest(".c-user");s.classList.contains("is--active")?t():(s.classList.add("is--active"),r.setBodyChecker())}))}));var y=document.getElementById("menu"),h=document.getElementById("hamburger-toggle");y&&h&&h.addEventListener("click",(function(t){t.preventDefault(),y.classList.contains("is--active")?(h.classList.remove("is--active"),y.classList.remove("is--active"),e(0)):(h.classList.add("is--active"),y.classList.add("is--active"),e(1))}));var L=document.querySelectorAll(".lk-tabs__item");L&&L.forEach((function(e,t){e.addEventListener("click",(function(){var t=e.closest(".lk-tabs");t.querySelectorAll(".lk-tabs__item").forEach((function(e){return e.classList.remove("is--active")})),t.querySelectorAll(".lk-tabs__holder").forEach((function(e){return e.classList.remove("is--active")})),e.classList.add("is--active");var i=t.querySelector(".is--active"),r=_toConsumableArray(t.querySelectorAll(".lk-tabs__item")).indexOf(i);t.querySelectorAll(".lk-tabs__holder")[r].classList.add("is--active")}))}));var g=document.querySelectorAll(".lk-trigger[data-id]"),_=document.querySelectorAll(".lk-tabs__holder[data-id] .lk-topping__back");g&&g.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var i=e.dataset.id;document.querySelector('.lk-tabs__holder[data-id="'+i+'"]').classList.add("is--open")}))})),_&&_.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),e.closest(".lk-tabs__holder[data-id]").classList.remove("is--open")}))}));var b=document.querySelectorAll(".input-field__input--date");b&&b.forEach((function(e){e.addEventListener("input",(function(){var e=this.value.replace(/_/g,"").split(".");e[0]&&2===e[0].length&&!function(e){var t=parseInt(e,10);return t>=1&&t<=31}(e[0])&&(e[0]=""),e[1]&&2===e[1].length&&!function(e){var t=parseInt(e,10);return t>=1&&t<=12}(e[1])&&(e[1]=""),e[2]&&4===e[2].length&&!function(e){var t=parseInt(e,10),i=(new Date).getFullYear()-18;return t>=1900&&t<=i}(e[2])&&(e[2]=""),this.value=e.join(".")}))}));var E=document.querySelectorAll(".validation-form");function S(e){var i=function(e){var i=e.querySelectorAll('.input-field__input[data-validation="required"], .input-field__input[data-type="email"]:not([data-validation="required"]), .input-field__textarea[data-validation="required"]'),r=e.querySelectorAll('.input-field__input[data-type="password"][data-validation="required"]');if(!i)return!0;var s=i.length;return i.forEach((function(e){var t=e.closest(".input-field");if(e.value.length>0)if(e.classList.contains("input-dadata-city")||e.classList.contains("input-dadata-street"))t.classList.contains("is--selected")?s--:t.classList.add("is--error");else if("tel"==e.dataset.type)13==e.value.replace(/[^+\d]/g,"").length?s--:t.classList.add("is--error");else if("password"==e.dataset.type){var i=e.getAttribute("data-min-value");e.value.length>=i?s--:t.classList.add("is--error")}else if("date"==e.dataset.type){var r=e.value.trim();/^\d{2}\.\d{2}\.\d{4}$/.test(r)?s--:t.classList.add("is--error")}else if("email"==e.dataset.type){var n=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,o=e.value;e.dataset.validation?n.test(o)?s--:t.classList.add("is--error"):e.value.length<1||n.test(o)?s--:t.classList.add("is--error")}else s--;else e.dataset.validation?t.classList.add("is--error"):s--})),r.length>1?r[0].value!==r[1].value?(t(e,"Введенные пароли не совпадают"),!1):(t(e),0==s||void 0):0==s}(e),r=function(e){var t=e.querySelectorAll('.select-box[data-validation="required"]');if(t){var i=t.length;return t.forEach((function(e){e.querySelectorAll(".select-box__input:checked").length>0?i--:e.classList.add("is--error")})),0==i}return!0}(e),s=function(e){var t=e.querySelectorAll('.switch__input[data-validation="required"]');if(t){var i=t.length;return t.forEach((function(e){var t=e.closest(".switch");e.checked?i--:(t.classList.add("is--error"),e.dataset.id&&document.querySelector('.validation-checkbox-message[data-id="'+e.dataset.id+'"]').classList.add("is--active"))})),0==i}return!0}(e),n=function(e){var t=e.querySelectorAll(".js-input-visibility .switch__input");if(t){var i=t.length;return console.log("before:",i),t.forEach((function(e){var t=e.closest(".switch"),r=t.nextElementSibling,s=r.querySelector(".auth-form__error");if(e.checked){console.log("checked:",e);var n=r.querySelectorAll(".input-field__input"),o=r.querySelectorAll(".square-checkbox__input");if(n&&n.length>0){var a=n.length;n.forEach((function(e){e.value.length>0?(a--,e.closest(".input-field").classList.remove("is--error")):e.closest(".input-field").classList.add("is--error")})),0==a?(i--,t.classList.remove("is--error")):t.classList.add("is--error")}if(o&&o.length>0){var l=!1;console.log("checkbox status:",l),o.forEach((function(e){e.checked&&(l=!0)})),console.log("checkbox status:",l),1==l?(i--,t.classList.remove("is--error"),s&&s.classList.remove("is--active")):(t.classList.add("is--error"),s&&s.classList.add("is--active"))}}else console.log("not checked:",e),i--})),console.log("after:",i),0==i}return!0}(e);return console.log(i,r,s,n),!!(i&&r&&s&&n)}E&&E.forEach((function(e){var t=e.querySelector(".validation-form-message"),i=e.querySelector(".validation-form-message-server"),r=e.querySelectorAll('.input-field__input[data-validation="required"], .input-field__input[data-type="email"]:not([data-validation="required"]), .input-field__textarea[data-validation="required"]'),s=e.querySelectorAll('.select-box[data-validation="required"]'),n=e.querySelectorAll('.switch__input[data-validation="required"]'),o=e.querySelectorAll(".js-input-visibility .switch__input");r&&r.forEach((function(e){e.addEventListener("input",(function(){var t=e.closest(".input-field");if("tel"==e.dataset.type)13==e.value.replace(/[^+\d]/g,"").length&&t.classList.contains("is--error")&&t.classList.remove("is--error");else if("password"==e.dataset.type){var r=e.getAttribute("data-min-value");e.value.length>=r&&t.classList.contains("is--error")&&t.classList.remove("is--error")}else if("date"==e.dataset.type){var s=e.value.trim();/^\d{2}\.\d{2}\.\d{4}$/.test(s)&&t.classList.contains("is--error")&&t.classList.remove("is--error")}else if("email"==e.dataset.type){var n=e.value;/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(n)&&t.classList.contains("is--error")&&t.classList.remove("is--error")}else e.value.length>0&&t.classList.contains("is--error")&&t.classList.remove("is--error");i.classList.contains("is--active")&&i.classList.remove("is--active")})),e.addEventListener("blur",(function(){var t=e.closest(".input-field");if(e.classList.contains("input-dadata-region")||e.classList.contains("input-dadata-city"))t.classList.contains("is--selected")||t.classList.add("is--error");else if("tel"==e.dataset.type)13!=e.value.replace(/[^+\d]/g,"").length&&t.classList.add("is--error");else if("password"==e.dataset.type){var i=e.getAttribute("data-min-value");e.value.length<i&&t.classList.add("is--error")}else if("date"==e.dataset.type){var r=e.value.trim();/^\d{2}\.\d{2}\.\d{4}$/.test(r)||t.classList.add("is--error")}else if("email"==e.dataset.type){var s=e.value;!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s)&&e.value.length>0?t.classList.add("is--error"):e.value.length<1&&t.classList.remove("is--error")}else 0==e.value.length&&t.classList.add("is--error")}))})),s&&s.forEach((function(e){e.querySelectorAll(".select-box__input").forEach((function(t){t.addEventListener("click",(function(){t.checked&&e.classList.remove("is--error")}))}))})),n&&n.forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".switch");e.checked&&t.classList.contains("is--error")&&(t.classList.remove("is--error"),e.dataset.id&&document.querySelector('.validation-checkbox-message[data-id="'+e.dataset.id+'"]').classList.remove("is--active"))}))})),o&&o.forEach((function(e){var t=e.closest(".switch"),i=t.nextElementSibling,r=i.querySelector(".auth-form__error"),s=i.querySelectorAll(".input-field__input"),n=i.querySelectorAll(".square-checkbox__input");if(e.addEventListener("click",(function(){!e.checked&&t.classList.contains("is--error")&&(t.classList.remove("is--error"),r&&r.classList.remove("is--active"))})),s){var o=function(){var e=s.length;s.forEach((function(t){t.value.length>0&&e--})),0==e?t.classList.remove("is--error"):t.classList.add("is--error")};s.forEach((function(e){e.addEventListener("input",(function(){e.value.length>0&&(o(),e.closest(".input-field").classList.remove("is--error"))})),e.addEventListener("blur",(function(){0==e.value.length&&(o(),e.closest(".input-field").classList.add("is--error"))}))}))}if(n){n.forEach((function(e){e.addEventListener("change",(function(){e.checked&&1==!0&&(t.classList.remove("is--error"),r&&r.classList.remove("is--active"))}))}))}})),e.addEventListener("submit",(function(r){S(e)?(t&&t.classList.remove("is--active"),i&&i.classList.remove("is--active"),"ajax"==e.dataset.action&&(r.preventDefault(),sendingFormData(e))):(r.preventDefault(),t&&t.classList.add("is--active"),i&&i.classList.remove("is--active"))}))}));var q=document.querySelector(".input-dadata-region"),A=document.querySelector(".input-dadata-city"),k="https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",w="8597dd60d3a83fb46930107993271556971eadf1";q&&(q.addEventListener("input",(function(){var e=q.closest(".input-field"),t=e.querySelector(".input-field__dropdown"),i=q.value,r=[],s={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+w},body:JSON.stringify({query:i,count:5,locations:[{country:"Беларусь"}],from_bound:{value:"region"},to_bound:{value:"region"},restrict_value:!0})};e.classList.contains("is--selected")&&e.classList.remove("is--selected"),i.length>=2?fetch(k,s).then((function(e){return e.text()})).then((function(i){if(JSON.parse(i).suggestions.forEach((function(e){null!=e.data.region&&r.push(e.data.region)})),r.length>0){e.classList.add("is--dropdown"),t.innerHTML="";for(var s=document.createElement("ul"),n=0;n<r.length;n++)s.innerHTML+='\n                                <li class="input-field__list-item">\n                                    <button class="input-field__list-elem">'.concat(r[n],"</button>\n                                </li>\n                            ");t.append(s)}else e.classList.remove("is--dropdown"),t.innerHTML=""})).catch((function(e){return console.log("error",e)})):(e.classList.remove("is--dropdown"),t.innerHTML="")})),q.addEventListener("blur",(function(){var e=q.closest(".input-field");e.classList.contains("is--selected")||(q.value="",A.value=""),e.classList.contains("is--dropdown")&&e.classList.remove("is--dropdown")}))),A&&(A.addEventListener("input",(function(){var e=A.closest(".input-field"),t=e.querySelector(".input-field__dropdown"),i=A.value,r=[],s={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+w},body:JSON.stringify({query:i,count:5,locations:[{country:"Беларусь",region:q.value}],from_bound:{value:"city"},to_bound:{value:"settlement"},restrict_value:!0})};e.classList.contains("is--selected")&&e.classList.remove("is--selected"),i.length>=2&&q.value.length>0?fetch(k,s).then((function(e){return e.text()})).then((function(i){if(JSON.parse(i).suggestions.forEach((function(e){null!=e.data.settlement_with_type?r.push(e.data.settlement_with_type):null!=e.data.city_with_type&&r.push(e.data.city_with_type)})),r.length>0){e.classList.add("is--dropdown"),t.innerHTML="";for(var s=document.createElement("ul"),n=0;n<r.length;n++)s.innerHTML+='\n                                <li class="input-field__list-item">\n                                    <button class="input-field__list-elem">'.concat(r[n],"</button>\n                                </li>\n                            ");t.append(s)}else e.classList.remove("is--dropdown"),t.innerHTML=""})).catch((function(e){return console.log("error",e)})):(e.classList.remove("is--dropdown"),t.innerHTML="")})),A.addEventListener("blur",(function(){var e=A.closest(".input-field");e.classList.contains("is--selected")||(A.value=""),e.classList.contains("is--dropdown")&&e.classList.remove("is--dropdown")}))),document.body.addEventListener("mousedown",(function(e){if(e.target.classList.contains("input-field__list-elem")){e.preventDefault();var t=e.target.closest(".input-field");t.querySelector(".input-field__input").value=e.target.innerHTML,t.classList.remove("is--dropdown"),t.classList.add("is--selected")}}));var x,T=document.querySelectorAll(".modal"),P=document.querySelectorAll(".modal-btn"),D=document.querySelectorAll(".modal__close");T&&P&&D&&(T.forEach((function(e){e.addEventListener("click",(function(e){(e.target.classList.contains("modal")||e.target.classList.contains("modal__wrap"))&&(e.preventDefault(),document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.body.classList.remove("scroll-disabled"))}))})),P.forEach((function(e,t){e.addEventListener("click",(function(t){t.preventDefault();var i=e.dataset.id;x&&clearTimeout(x),e.dataset.mobile?window.innerWidth<=743&&document.getElementById(i)&&(document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.getElementById(i).classList.add("is--active"),document.body.classList.add("scroll-disabled"),e.dataset.temp&&(x=setTimeout((function(){document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.body.classList.remove("scroll-disabled")}),3500))):document.getElementById(i)&&(document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.getElementById(i).classList.add("is--active"),document.body.classList.add("scroll-disabled"),e.dataset.temp&&(x=setTimeout((function(){document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.body.classList.remove("scroll-disabled")}),3500)))}))})),D.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.body.classList.remove("scroll-disabled")}))})))}));