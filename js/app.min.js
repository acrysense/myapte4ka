"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}document.addEventListener("DOMContentLoaded",(function(){function e(e){var t=0,i=window.innerWidth-document.body.offsetWidth+"px",r=document.querySelectorAll(".fixed");e?(document.body.classList.add("scroll-disabled"),t=window.pageYOffset,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="-"+t+"px",document.body.style.width="100%",document.body.style.paddingRight=i,r&&r.forEach((function(e){e.style.marginRight=i}))):(document.body.classList.remove("scroll-disabled"),t=Math.abs(parseInt(document.querySelector("body").style.top.replace("px",""))),document.body.style.removeProperty("overflow"),document.body.style.removeProperty("position"),document.body.style.removeProperty("top"),document.body.style.removeProperty("width"),document.body.style.removeProperty("padding-right"),r&&r.forEach((function(e){e.style.removeProperty("margin-right")})),window.scrollTo({top:isNaN(t)?0:t,behavior:"instant"}))}function t(e,t){var i=e.querySelector(".validation-form-message");i&&(i.dataset.originalMessage||(i.dataset.originalMessage=i.textContent.trim()),t?i.textContent=t:(i.textContent=i.dataset.originalMessage,delete i.dataset.originalMessage))}var i=function(e,t){var i=function(i){for(var n=i.target;n&&!e.includes(n);)n=n.parentNode;n||(t(),r())};function r(){document.documentElement.removeEventListener("click",i)}return{setBodyChecker:function(){document.documentElement.addEventListener("click",i)},removeBodyChecker:r}},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="none"),window.setTimeout((function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="auto")}),t),e.parentNode.classList.remove("is--open")},n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;e.style.removeProperty("display");var i=window.getComputedStyle(e).display;"none"===i&&(i="block"),e.style.display=i;var r=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=r+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="none"),window.setTimeout((function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="auto")}),t),e.parentNode.classList.add("is--open")};Inputmask().mask(document.querySelectorAll("input"));var s=document.querySelectorAll(".input-field__input"),o=document.querySelectorAll(".input-field__clear"),a=document.querySelectorAll(".input-field__visibility");s&&s.forEach((function(e){e.addEventListener("input",(function(){var t=e.closest(".input-field").querySelector(".input-field__clear");t&&(e.value.length>=1?t.classList.add("is--active"):t.classList.remove("is--active"))}))})),o&&o.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var i=e.closest(".input-field").querySelector(".input-field__input");i.value.length>=1&&(i.value="",e.classList.remove("is--active"))}))})),a&&a.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var i=e.closest(".input-field").querySelector(".input-field__input");e.classList.contains("is--active")?(e.classList.remove("is--active"),i.type="password"):(e.classList.add("is--active"),i.type="text")}))}));var l=document.querySelectorAll('.js-input-visibility input[type="checkbox"]');l&&l.forEach((function(e){e.addEventListener("change",(function(t){t.preventDefault();var i=e.closest(".auth-form__switches").querySelector(".hidden-block");1==e.checked?n(i):0==e.checked&&r(i)}))}));var c=document.querySelectorAll(".input-field__number");c&&c.forEach((function(e,t){e.addEventListener("input",(function(e){var i=e.target.value;i.length>1&&(e.target.value=i.slice(0,1)),1===i.length&&t<c.length-1&&c[t+1].focus()})),e.addEventListener("keydown",(function(i){"Backspace"===i.key&&!e.value&&t>0&&c[t-1].focus()})),e.addEventListener("paste",(function(e){e.preventDefault();var t=e.clipboardData.getData("text").split("").filter((function(e){return/\d/.test(e)}));t.slice(0,c.length).forEach((function(e,t){c[t].value=e})),t.length>0&&c[Math.min(t.length,c.length-1)].focus()}))}));var d=document.querySelectorAll(".select-box__placeholder"),u=document.querySelectorAll(".select-box__checkbox");d&&(d.forEach((function(e){var t=function(){document.querySelectorAll(".select-box").forEach((function(e){return e.classList.remove("is--active")}))},r=i([e.parentNode].concat(_toConsumableArray(document.querySelectorAll(".select-box"))),t);e.addEventListener("click",(function(){var i=e.closest(".select-box");i.classList.contains("is--active")?t():(t(),i.classList.add("is--active"),r.setBodyChecker())}))})),u&&u.forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".select-box");t.querySelector(".select-box__placeholder span").innerHTML=e.querySelector(".select-box__title").innerHTML,document.querySelectorAll(".select-box").forEach((function(e){return e.classList.remove("is--active")})),t.querySelector(".select-box__placeholder").classList.contains("is--selected")||t.querySelector(".select-box__placeholder").classList.add("is--selected")}))})));var v,f=document.querySelectorAll(".c-code__resend-btn");f&&f.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),function(e,t){clearInterval(v);var i=t,r=e.closest(".c-code"),n=r.querySelector(".c-code__timer");r.classList.add("is--countdown"),n.textContent=i,v=setInterval((function(){var e=i;n.textContent=e,--i<0&&(clearInterval(v),r.classList.remove("is--countdown"))}),1e3)}(e,90)}))}));var p=document.querySelectorAll(".c-dropdown__trigger");p&&p.forEach((function(e){var t=function(){document.querySelectorAll(".c-dropdown").forEach((function(e){return e.classList.remove("is--active")}))},r=i([e.parentNode],t);e.addEventListener("click",(function(i){i.preventDefault();var n=e.closest(".c-dropdown");e.classList.contains("c-dropdown__trigger--mobile")?window.innerWidth>=744&&(n.classList.contains("is--active")?t():(n.classList.add("is--active"),r.setBodyChecker())):n.classList.contains("is--active")?t():(n.classList.add("is--active"),r.setBodyChecker())}))}));var m=document.querySelectorAll(".c-user__trigger");m&&m.forEach((function(e){var t=function(){document.querySelectorAll(".c-user").forEach((function(e){return e.classList.remove("is--active")}))},r=i([e.parentNode],t);e.addEventListener("click",(function(i){i.preventDefault();var n=e.closest(".c-user");n.classList.contains("is--active")?t():(n.classList.add("is--active"),r.setBodyChecker())}))}));var y=document.getElementById("menu"),h=document.getElementById("hamburger-toggle");document.getElementById("menu-close");y&&h&&h.addEventListener("click",(function(t){t.preventDefault(),y.classList.contains("is--active")?(h.classList.remove("is--active"),y.classList.remove("is--active"),e(0)):(h.classList.add("is--active"),y.classList.add("is--active"),e(1))}));var L=document.querySelectorAll(".lk-tabs__item");L&&L.forEach((function(e,t){e.addEventListener("click",(function(){var t=e.closest(".lk-tabs");t.querySelectorAll(".lk-tabs__item").forEach((function(e){return e.classList.remove("is--active")})),t.querySelectorAll(".lk-tabs__holder").forEach((function(e){return e.classList.remove("is--active")})),e.classList.add("is--active");var i=t.querySelector(".is--active"),r=_toConsumableArray(t.querySelectorAll(".lk-tabs__item")).indexOf(i);t.querySelectorAll(".lk-tabs__holder")[r].classList.add("is--active")}))}));var g=document.querySelectorAll(".lk-trigger[data-id]"),_=document.querySelectorAll(".lk-tabs__holder[data-id] .lk-topping__back");g&&g.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var i=e.dataset.id;document.querySelector('.lk-tabs__holder[data-id="'+i+'"]').classList.add("is--open")}))})),_&&_.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),e.closest(".lk-tabs__holder[data-id]").classList.remove("is--open")}))}));var b=document.querySelectorAll(".validation-form");function E(e){var i=function(e){var i=e.querySelectorAll('.input-field__input[data-validation="required"], .input-field__textarea[data-validation="required"]'),r=e.querySelectorAll('.input-field__input[data-type="password"][data-validation="required"]');if(!i)return!0;var n=i.length;return i.forEach((function(e){var t=e.closest(".input-field");if(e.value.length>0)if(e.classList.contains("input-dadata-city")||e.classList.contains("input-dadata-street"))t.classList.contains("is--selected")?n--:t.classList.add("is--error");else if("tel"==e.dataset.type)13==e.value.replace(/[^+\d]/g,"").length?n--:t.classList.add("is--error");else if("password"==e.dataset.type){var i=e.getAttribute("data-min-value");e.value.length>=i?n--:t.classList.add("is--error")}else if("date"==e.dataset.type){var r=e.value.trim();/^\d{2}\.\d{2}\.\d{4}$/.test(r)?n--:t.classList.add("is--error")}else n--;else t.classList.add("is--error")})),r.length>1?r[0].value!==r[1].value?(t(e,"Введенные пароли не совпадают"),!1):(t(e),0==n||void 0):0==n}(e),r=function(e){var t=e.querySelectorAll('.select-box[data-validation="required"]');if(t){var i=t.length;return t.forEach((function(e){e.querySelectorAll(".select-box__input:checked").length>0?i--:e.classList.add("is--error")})),0==i}return!0}(e),n=function(e){var t=e.querySelectorAll('.switch__input[data-validation="required"]');if(t){var i=t.length;return t.forEach((function(e){var t=e.closest(".switch");e.checked?i--:t.classList.add("is--error")})),0==i}return!0}(e);return!!(i&&r&&n)}b&&b.forEach((function(e){var t=e.querySelector(".validation-form-message"),i=e.querySelector(".validation-form-message-server"),r=e.querySelectorAll('.input-field__input[data-validation="required"], .input-field__textarea[data-validation="required"]'),n=e.querySelectorAll('.select-box[data-validation="required"]'),s=e.querySelectorAll('.switch__input[data-validation="required"]');r&&r.forEach((function(e){e.addEventListener("input",(function(){var t=e.closest(".input-field");if("tel"==e.dataset.type)13==e.value.replace(/[^+\d]/g,"").length&&t.classList.contains("is--error")&&t.classList.remove("is--error");else if("password"==e.dataset.type){var r=e.getAttribute("data-min-value");e.value.length>=r&&t.classList.contains("is--error")&&t.classList.remove("is--error")}else if("date"==e.dataset.type){var n=e.value.trim();/^\d{2}\.\d{2}\.\d{4}$/.test(n)&&t.classList.contains("is--error")&&t.classList.remove("is--error")}else e.value.length>0&&t.classList.contains("is--error")&&t.classList.remove("is--error");i.classList.contains("is--active")&&i.classList.remove("is--active")})),e.addEventListener("blur",(function(){var t=e.closest(".input-field");if(e.classList.contains("input-dadata-region")||e.classList.contains("input-dadata-city"))t.classList.contains("is--selected")||t.classList.add("is--error");else if("tel"==e.dataset.type)13!=e.value.replace(/[^+\d]/g,"").length&&t.classList.add("is--error");else if("password"==e.dataset.type){var i=e.getAttribute("data-min-value");e.value.length<i&&t.classList.add("is--error")}else if("date"==e.dataset.type){var r=e.value.trim();/^\d{2}\.\d{2}\.\d{4}$/.test(r)||t.classList.add("is--error")}else 0==e.value.length&&t.classList.add("is--error")}))})),n&&n.forEach((function(e){e.querySelectorAll(".select-box__input").forEach((function(t){t.addEventListener("click",(function(){t.checked&&e.classList.remove("is--error")}))}))})),s&&s.forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".switch");e.checked&&t.classList.contains("is--error")&&t.classList.remove("is--error")}))})),e.addEventListener("submit",(function(r){E(e)?(t&&t.classList.remove("is--active"),i&&i.classList.remove("is--active"),"ajax"==e.dataset.action&&(r.preventDefault(),sendingFormData(e))):(r.preventDefault(),t&&t.classList.add("is--active"),i&&i.classList.remove("is--active"))}))}));var S=document.querySelector(".input-dadata-region"),q=document.querySelector(".input-dadata-city"),A="https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",w="8597dd60d3a83fb46930107993271556971eadf1";S&&(S.addEventListener("input",(function(){var e=S.closest(".input-field"),t=e.querySelector(".input-field__dropdown"),i=S.value,r=[],n={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+w},body:JSON.stringify({query:i,count:5,locations:[{country:"Беларусь"}],from_bound:{value:"region"},to_bound:{value:"region"},restrict_value:!0})};e.classList.contains("is--selected")&&e.classList.remove("is--selected"),i.length>=2?fetch(A,n).then((function(e){return e.text()})).then((function(i){if(JSON.parse(i).suggestions.forEach((function(e){null!=e.data.region&&r.push(e.data.region)})),r.length>0){e.classList.add("is--dropdown"),t.innerHTML="";for(var n=document.createElement("ul"),s=0;s<r.length;s++)n.innerHTML+='\n                                <li class="input-field__list-item">\n                                    <button class="input-field__list-elem">'.concat(r[s],"</button>\n                                </li>\n                            ");t.append(n)}else e.classList.remove("is--dropdown"),t.innerHTML=""})).catch((function(e){return console.log("error",e)})):(e.classList.remove("is--dropdown"),t.innerHTML="")})),S.addEventListener("blur",(function(){var e=S.closest(".input-field");e.classList.contains("is--selected")||(S.value="",q.value=""),e.classList.contains("is--dropdown")&&e.classList.remove("is--dropdown")}))),q&&(q.addEventListener("input",(function(){var e=q.closest(".input-field"),t=e.querySelector(".input-field__dropdown"),i=q.value,r=[],n={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+w},body:JSON.stringify({query:i,count:5,locations:[{country:"Беларусь",region:S.value}],from_bound:{value:"city"},to_bound:{value:"settlement"},restrict_value:!0})};e.classList.contains("is--selected")&&e.classList.remove("is--selected"),i.length>=2&&S.value.length>0?fetch(A,n).then((function(e){return e.text()})).then((function(i){if(JSON.parse(i).suggestions.forEach((function(e){null!=e.data.settlement_with_type?r.push(e.data.settlement_with_type):null!=e.data.city_with_type&&r.push(e.data.city_with_type)})),r.length>0){e.classList.add("is--dropdown"),t.innerHTML="";for(var n=document.createElement("ul"),s=0;s<r.length;s++)n.innerHTML+='\n                                <li class="input-field__list-item">\n                                    <button class="input-field__list-elem">'.concat(r[s],"</button>\n                                </li>\n                            ");t.append(n)}else e.classList.remove("is--dropdown"),t.innerHTML=""})).catch((function(e){return console.log("error",e)})):(e.classList.remove("is--dropdown"),t.innerHTML="")})),q.addEventListener("blur",(function(){var e=q.closest(".input-field");e.classList.contains("is--selected")||(q.value=""),e.classList.contains("is--dropdown")&&e.classList.remove("is--dropdown")}))),document.body.addEventListener("mousedown",(function(e){if(e.target.classList.contains("input-field__list-elem")){e.preventDefault();var t=e.target.closest(".input-field");t.querySelector(".input-field__input").value=e.target.innerHTML,t.classList.remove("is--dropdown"),t.classList.add("is--selected")}}));var k,x=document.querySelectorAll(".modal"),T=document.querySelectorAll(".modal-btn"),P=document.querySelectorAll(".modal__close");x&&T&&P&&(x.forEach((function(e){e.addEventListener("click",(function(e){(e.target.classList.contains("modal")||e.target.classList.contains("modal__wrap"))&&(e.preventDefault(),document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.body.classList.remove("scroll-disabled"))}))})),T.forEach((function(e,t){e.addEventListener("click",(function(t){t.preventDefault();var i=e.dataset.id;k&&clearTimeout(k),e.dataset.mobile?window.innerWidth<=743&&document.getElementById(i)&&(document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.getElementById(i).classList.add("is--active"),document.body.classList.add("scroll-disabled"),e.dataset.temp&&(k=setTimeout((function(){document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.body.classList.remove("scroll-disabled")}),3500))):document.getElementById(i)&&(document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.getElementById(i).classList.add("is--active"),document.body.classList.add("scroll-disabled"),e.dataset.temp&&(k=setTimeout((function(){document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.body.classList.remove("scroll-disabled")}),3500)))}))})),P.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.body.classList.remove("scroll-disabled")}))})))}));